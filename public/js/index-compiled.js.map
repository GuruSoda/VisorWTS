{"version":3,"sources":["../../src/js/index.js","../../src/js/router.js","../../src/js/utils.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["function readableBytes(bytes) {\n    var i = Math.floor(Math.log(bytes) / Math.log(1024)),\n    sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n    return (bytes / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + sizes[i];\n}\n\nfunction esperando(encender) {\n\n    if (!encender) \n        document.getElementById('espera').innerHTML = ''\n    else { \n        let preloader = `\n                <div class=\"row center\">\n                    <div class=\"preloader-wrapper big active\">\n                        <div class=\"spinner-layer spinner-blue-only\">\n                        <div class=\"circle-clipper left\">\n                            <div class=\"circle\"></div>\n                        </div><div class=\"gap-patch\">\n                            <div class=\"circle\"></div>\n                        </div><div class=\"circle-clipper right\">\n                            <div class=\"circle\"></div>\n                        </div>\n                        </div>\n                    </div>\n                </div>`\n\n                document.getElementById('espera').innerHTML = preloader\n        }\n}\n\nfunction registroServidorResumen(dataServidor) {\n\n    return `\n    <tr>\n        <td><i class=\"material-icons\">computer</i></td>\n        <td>${dataServidor.Computadora}</td>\n        <td>${dataServidor.OS}</td>\n        <td class=\"left\">\n            <!--\n            <span class=\"new badge blue left\" data-badge-caption=\"Memoria\"></span>\n            <span class=\"new badge blue left\" data-badge-caption=\"Memoria Usada\"></span>\n            <span class=\"new badge blue left\" data-badge-caption=\"Procesos\"></span>\n            <span class=\"new badge blue left\" data-badge-caption=\"Sesiones\"></span>\n            -->\n            <div title=\"Memoria del equipo\" class=\"chip red lighten-1 white-text\">${readableBytes(dataServidor.Memoria.TotalFisica)}</div>\n            <div title=\"Memoria utilizada\" class=\"chip green lighten-0 white-text\">${readableBytes(dataServidor.Memoria.TotalFisica - dataServidor.Memoria.DisponibleFisica)}</div>\n            <div title=\"Carga\" class=\"chip deep-orange lighten-1 white-text\">${dataServidor.Memoria.Carga.toFixed(2) + ' %'}</div>\n            <div title=\"Sesiones\" class=\"chip blue lighten-1 white-text\">${dataServidor.sesiones}</div>\n            <div title=\"Procesos\" class=\"chip purple lighten-2 white-text\">${dataServidor.procesos}</div>\n        </td>\n    </tr>`\n}\n\nfunction resumen() {\n    getJSON('/api/resumen', function (data) {\n        //        console.log('data:', data)\n        document.getElementById('valServidores').innerText = data.servidores ? data.servidores : -1\n        document.getElementById('valSesiones').innerText = data.sesiones ? data.sesiones : -1\n        document.getElementById('valProcesos').innerText = data.procesos ? data.procesos : -1\n        document.getElementById('valMemoria').innerText = data.totalMemoria ? readableBytes(data.totalMemoria) : -1\n        document.getElementById('valMemoriaUsada').innerText = data.usadaMemoria ? readableBytes(data.usadaMemoria) : -1\n        document.getElementById('valCarga').innerText = data.carga ? data.carga.toFixed(2) + ' %' : -1 \n        \n        getJSON('/api/infoservidores', function(data) {\n\n            let registros = \"\"\n            for(let i=0;i<data.length;i++) {\n                registros += registroServidorResumen(data[i])\n            }\n            \n            document.getElementById('listaServidoresResumen').innerHTML = registros \n        })\n    })\n}\n\nfunction tablaProcesosID(data) {\n    let html = `\n        <table class=\"highlight\">\n            <thead>\n                    <tr>\n                        <th></th>\n                        <th>Aplicacion</th>\n                        <th>PID</th>\n                    </tr>\n            </thead>\n            <tbody>`\n\n    for (let j=0;j<data.length;j++) {\n        html += `<tr>\n                    <td><i class=\"material-icons\">insert_drive_file</i></td>\n                    <td>${data[j].process}</td>\n                    <td>${data[j].idprocess}</td>\n                </tr>`\n        }\n\n    html += '</tbody></table>'\n\n    return html\n}\n\nfunction cargarUsuarios() {\n\n    esperando(true)\n\n    getJSON('/api/usuariosxservidor', function(data) {\n\n        let items = \"\" \n        for (let i=0;i<data.length;i++) {\n            items += `\n            <li>\n                <div class=\"collapsible-header\">\n                    <i class=\"material-icons\">face</i>\n                    ${data[i].userName}\n                    <span class=\"new badge blue\" data-badge-caption=\"${data[i].serverName}\"></span>\n                </div>\n                <div class=\"collapsible-body\">${tablaProcesosID(data[i].procesos)}</div>\n            </li>`\n        }\n        \n        esperando(false)\n        document.getElementById('botonExportar').style.visibility = 'visible'\n        document.getElementById('listaUsuarios').innerHTML = items\n    })\n}\n\nfunction tablaUsuariosWinStationName(data) {\n\n    let html = `\n        <table class=\"highlight\">\n            <thead>\n                <tr>\n                    <th></th>\n                    <th>Usuario</th>\n                    <th>Estado</th>\n                    <th>WinStation</th>\n                </tr>\n            </thead>\n            <tbody>`\n\n    for (let j=0;j<data.length;j++) {\n        html += `<tr>\n                    <td><i class=\"material-icons\">face</i></td>\n                    <td>${data[j].username}</td>\n                    <td>${data[j].state}</td>\n                    <td>${data[j].winstationname}</td>\n                </tr>`\n        }\n\n    html += '</tbody></table>'\n\n    return html\n}\n\nfunction cargarServidores() {\n\n    esperando(true)\n\n    getJSON('/api/sesionesxservidor', function(data) {\n\n        let items = \"\" \n        for (let i=0;i<data.length;i++) {\n            items += `\n            <li>\n                <div class=\"collapsible-header\">\n                    <i class=\"material-icons\">computer</i>\n                    ${data[i].serverName}\n                    <span class=\"new badge blue\" data-badge-caption=\"Sesiones\">${data[i].sesiones.length}</span>\n                </div>\n    \n                <div class=\"collapsible-body\">${tablaUsuariosWinStationName(data[i].sesiones)}</div>\n            </li>`\n        }\n\n        document.getElementById('listaServidores').innerHTML = items\n        esperando(false)\n    })\n}\n","document.addEventListener('DOMContentLoaded', function() {\n    M.AutoInit()\n\n    let elems = document.querySelectorAll('.sidenav')\n    let instancesaaa = M.Sidenav.init(elems, { draggable: false, edge: 'left' })\n\n    crossroads.addRoute('#/', function () {\n        load('main', 'partials/resumen.html', function () {\n\n            resumen()\n        })\n    })\n\n    crossroads.addRoute('#/servidores', function () {\n        load('main', 'partials/servidores.html', function() {\n\n            cargarServidores()\n\n            let elems = document.querySelectorAll('.collapsible')\n\n            let instances = M.Collapsible.init(elems, {acordeon: false, onOpenStart: null })\n\n        })\n    })\n\n    crossroads.addRoute('#/usuarios', function () {\n        load('main', 'partials/usuarios.html', function() {\n\n            cargarUsuarios()\n\n            let elem = document.querySelectorAll('.collapsible')\n            let instances = M.Collapsible.init(elem, {acordeon: false, onOpenStart: null })\n        })\n    })\n\n    crossroads.addRoute('#/buscar', function () {\n        load('main', 'partials/buscar.html')\n    })\n\n    // otra forma de escuchar cambios en el #\n    window.addEventListener('hashchange', function() { crossroads.parse(window.location.hash) })\n\n    if (!window.location.hash) location.replace('#/')\n\n    crossroads.parse(window.location.hash)\n})\n","function load(selector, url, cb) {\n    var request = new XMLHttpRequest()\n\n    // se ejecuta cuando finalizo el GET\n    request.onload = function() {\n        if (request.status >= 200 && request.status < 400) {\n            document.getElementById(selector).innerHTML = request.responseText\n\n            if (cb) cb()\n        }\n    }\n\n    request.open('GET', url)\n\n    request.send()\n}\n\nfunction getJSON(url, cb) {\n    var request = new XMLHttpRequest()\n\n    request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n            if(request.status === 200) {\n                var data = JSON.parse(request.responseText)\n\n                if (cb) cb(data)\n            }\n        }\n    }\n\n    request.open('GET', url)\n\n    request.send()\n}\n\n// async function getJSON(url) {\n//     return fetch(url).then(function(data) {\n//         return data.json()\n//     }).then(function(json) {\n//         console.log(url,':',json)\n//         return json\n//     }).catch(function(error) {\n//         console.log('Error:', error)\n//         return error.message\n//     })\n// }\n"]}